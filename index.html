<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>أسماء الله الحسنى - تنزيل الصوت</title>
<style>
body { font-family: Arial; direction: rtl; text-align: center; margin: 50px; }
button { margin: 10px; padding: 10px 20px; font-size: 18px; cursor: pointer; }
</style>
</head>
<body>
<h1>أسماء الله الحسنى - تنزيل الصوت</h1>

<button onclick="speakDownload('الله')">الله</button>
<button onclick="speakDownload('الرحمن')">الرحمن</button>
<button onclick="speakDownload('الرحيم')">الرحيم</button>
<button onclick="speakDownload('الملك')">الملك</button>
<button onclick="speakDownload('القدوس')">القدوس</button>

<script>
async function speakDownload(text) {
  // أنشئ ملف صوتي باستخدام واجهة SpeechSynthesis
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'ar-SA';
  
  // استخدم AudioContext لتسجيل الصوت
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const dest = audioContext.createMediaStreamDestination();
  const mediaRecorder = new MediaRecorder(dest.stream);

  let chunks = [];
  mediaRecorder.ondataavailable = e => chunks.push(e.data);
  mediaRecorder.onstop = e => {
    const blob = new Blob(chunks, {type:'audio/ogg'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = text + '.ogg';
    a.click();
    URL.revokeObjectURL(url);
  };

  mediaRecorder.start();

  const source = audioContext.createMediaStreamSource(dest.stream);
  source.connect(audioContext.destination);

  speechSynthesis.speak(utterance);

  utterance.onend = () => {
    mediaRecorder.stop();
  };
}
</script>
</body>
</html>
